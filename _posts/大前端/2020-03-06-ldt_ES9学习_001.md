---
layout: post
title:  "async await 解决请求接口异步问题"
date:   2020-03-06
tags:  ldt
categories: ES6
---

1. 等待接口数据接收完成，再执行下一步操作
	```javaScript
	async customerListView() {//客户列表查看接口
        var userInfoData = JSON.parse(localStorage.getItem("userInfoData"));
        //var jiHuaViewData = JSON.parse(localStorage.getItem("getUserInfo"));
        //console.log(userInfoData.userUUId)
        var customListLength = JSON.parse(localStorage.getItem("costomListLength"))
        var num = parseInt(customListLength / 5) + 1
        if (num == 0) {
            num = 1
        }
        var row = 5
        //console.log(num)
        var getCustomerListData = []
        var getData
        //console.log(userInfoData.token)
        axios.defaults.headers.common["token"] = userInfoData.token
        await axios.post("http://localhost:8888/api/jykj/CustomerListView", { "row": 5, "page": num }, Headers = { 'contentType': 'application/json; charset=UTF-8' }).then(response => {
            console.log(response)
            getData = response.data.customerList
            for (var i = 0; i < getData.length; i++) {
                getCustomerListData.push({ "customerName": getData[i].customerName, "customerUUId": getData[i].customerUUId })
            }
            //localStorage.setItem("getCustomerListData", JSON.stringify(getCustomerListData))//获取客户信息列表

        }).catch(error => {
            console.log(error)
        })
        return getCustomerListData
    },
	```

2. 执行此方法并接收数据
	```javaScript
      //console.log(this.customerList.length)
      getBaseData.customerListView().then(res => {
        this.customerList = res;
      });
	```


3. 编程思路-将复杂功能简单换

	* 在实现一个复杂功能时，可以通过模块化和封装的方式来实现简化逻辑复杂程度。这种思维的好处有：

		1. 单个类中的代码复杂程度和代码行数降低

		2. 有效理清思路，能快速设计大体实现办法

		3. 程序出错易于找到出错部分

